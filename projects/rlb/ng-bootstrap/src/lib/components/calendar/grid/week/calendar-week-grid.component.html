<div class="table-responsive rounded" [style.max-height.rem]="maxBodyHeight" style="overflow-y:auto;">
  <table class="table table-sm m-0">
    <thead class="table-light sticky-top">
    <tr>
      <th class="text-end small px-1"></th> <!-- Placeholder -->
      <th *ngFor="let day of days" class="text-center" [class.bg-primary]="isToday(day)">
        {{ day | dtz:'DD MM' | monthFormatter }}
      </th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let time of timeSlots" [style.height.px]="rowHeight">
      <td class="text-center small d-flex align-items-center justify-content-center" [style.height.px]="rowHeight">
        {{ time }}
      </td>
      <td *ngFor="let day of days" class="calendar-hour-cell" [style.height.px]="rowHeight"
          (click)="onEventEdit(); $event.stopPropagation()">
        <div class="quarter-hour-line top-25"></div>
        <div class="quarter-hour-line top-50"></div>
        <div class="quarter-hour-line top-75"></div>
        <rlb-calendar-event
          *ngFor="let event of getEventsForHour(day, time)"
          [event]="event"
          [time]="time"
          [day]="day"
          [rowHeight]="rowHeight"
          (eventClick)="eventClick.emit($event)"
          (eventContainerClick)="eventContainerClick.emit($event)"
        />
        <div *ngIf="isCurrentDay(day) && isCurrentHour(time)"
             class="now-line"
             [style.top.px]="calculateNowLineTop()">
          <div class="now-line-dot"></div>
        </div>
      </td>
    </tr>
    </tbody>
  </table>
</div>
