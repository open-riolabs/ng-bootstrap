@if (noCard) {
  <ng-container [ngTemplateOutlet]="form"></ng-container>
} @else {
  <div class="card mb-3">
    <div class="card-body">
      @if (title) {
        <h5 class="card-title">{{ title | translate }}</h5>
      }
      @if (subTitle) {
        <p class="card-text">{{ subTitle | translate }}</p>
      }
      <ng-container [ngTemplateOutlet]="form"></ng-container>
    </div>
  </div>
}


<ng-template #form>
  @if (filterForm) {
    <form
      [formGroup]="filterForm"
      [class.was-validated]="ngForm.submitted"
      class="needs-validation"
      #ngForm="ngForm"
      (ngSubmit)="onFilterSubmit()"
      >
      <div class="row">
        @for (input of _fields; track identify($index, input)) {
          <div
            class="col"
            [ngClass]="input.cols"
            >
            <div class="mb-3">
              @if (isText(input.type)) {
                <rlb-input
                  [formControlName]="input.property"
                  [type]="input.type"
                  [placeholder]="input.name | translate"
                  >
                  @if (input.label) {
                    <ng-container before>
                      <span #after>
                        {{ input.label | translate }}
                      </span>
                    </ng-container>
                  }
                </rlb-input>
              }
              @if (isSwitch(input.type)) {
                <rlb-switch
                  [formControlName]="input.property"
                  />
                }
              </div>
            </div>
          }
        </div>
        @if (!noSubmit) {
          <div class="row">
            <div class="col">
              <button
                class="btn btn-primary float-end"
                [disabled]="!filterForm.valid"
                >
                {{ "common.filter" | translate }}
              </button>
            </div>
          </div>
        }
      </form>
    }
  </ng-template>
